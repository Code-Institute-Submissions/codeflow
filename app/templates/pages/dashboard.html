{% extends 'layout/base.html' %}
{% block content %}


<div class="container mt-3">
    <div class="row">
        <div class="col-12">
            <ul class="nav nav-tabs justify-content-center">
                <li class="active"><a href="#">Blog Articles</a></li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Projects<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">My Projects</a></li>
                        <li><a href="#">My Pieces</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Profile <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#profile">Profile</a></li>
                        <li><a href="#ProfileMessages">Profile Messages</a></li>
                        <li><a href="{{ url_for('add_profile')}}">Create Profile</a></li>
                        <li><a href="{{ url_for('edit_profile', profile_id=profile._id) }}">Update Profile</a></li>
                        <li id="delete-profile-modal" data-toggle="modal" data-target="#deleteProfile">Delete
                            Profile</a>
                        </li>
                    </ul>
                </li>
                <li><a href="{{ url_for('update_password') }}">Password</a></li>
            </ul>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="deleteProfile" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" style="color:red;">WARNING</h4>
                </div>
                <div class="modal-body">
                    <p>This process is immediate and cannot be undone. Are you sure?</p>
                    <!-- Button to confirm delete article -->
                    <form action="{{ url_for('delete_profile', profile_id=profile._id) }}" method="post">
                        <input id="delete-profile-btn" class="btn btn-outline-primary btn-sm" type="submit"
                            value="Confirm Delete">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger btn-sm" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <section class="section-content">
        <legend class=" border-bottom text-center">{{ session['username'] }}'s Dashboard</legend>
        <div class="container">
            <div id="profile" class="mt-2">
                {% if profile %}
                <div class="row">
                    <div class="col-sm-12">
                        <ul>Headline:
                            <li> {{ profile.headline }}</li>
                        </ul>
                        <ul>Bio:
                            <li>{{ profile.bio|safe }}</li>
                        </ul>
                        <div class="row">
                            <div class="col-sm-6">
                                <ul>Languages:
                                    {% for lang in profile.languages %}
                                    <li>{{ lang }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col-sm-6">
                                <ul>Frameworks:
                                    {% for item in profile.frameworks %}
                                    <li>{{ item }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <ul>Links:
                            {% for link in profile.personal_links %}
                            {% for key, value in link.items() %}
                            <li>{{ key }}: {{ value }}</li>
                            {% endfor %}
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="col-sm-12 text-center">
                <p>If you create a profile it will appear here.</p>
            </div>
            {% endif %}
        </div>
    </section>
</div>

{% endblock content %}